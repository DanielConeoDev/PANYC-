<?php

namespace App\Filament\Resources;

use App\Filament\Resources\FuenteResource\Pages;
use App\Filament\Resources\FuenteResource\RelationManagers;
use Filament\Forms\Components\DatePicker;
use Filament\Forms\Components\Section;
use App\Models\Fuente;
use Filament\Forms\Components\Select;
use Filament\Forms;
use Filament\Forms\Form;
use Filament\Tables;
use Filament\Forms\Components\TextInput;
use Filament\Resources\Resource;
use Filament\Tables\Table;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\SoftDeletingScope;

class FuenteResource extends Resource
{
    protected static ?string $model = Fuente::class;

    protected static ?string $navigationIcon = 'heroicon-o-globe-americas';

    protected static ?string $label = 'Fuentes';
    protected static ?string $pluralLabel = 'Fuentes';
    protected static ?string $navigationGroup = 'CatÃ¡logos';


    public static function form(Form $form): Form
    {
        return $form
            ->schema([
                Section::make('InformaciÃ³n de la Fuente')
                    ->description('Complete los datos de la fuente de informaciÃ³n.')
                    ->schema([
                        TextInput::make('fuente')
                            ->label('Nombre de la Fuente')
                            ->required()
                            ->unique(ignoreRecord: true)
                            ->maxLength(255),

                        Select::make('pais')->label('PaÃ­s')->required()->options([
                            'AF' => 'Afghanistan ğŸ‡¦ğŸ‡«',
                            'AL' => 'Albania ğŸ‡¦ğŸ‡±',
                            'DZ' => 'Algeria ğŸ‡©ğŸ‡¿',
                            'AS' => 'American Samoa ğŸ‡¦ğŸ‡¸',
                            'AD' => 'Andorra ğŸ‡¦ğŸ‡©',
                            'AO' => 'Angola ğŸ‡¦ğŸ‡´',
                            'AI' => 'Anguilla ğŸ‡¦ğŸ‡®',
                            'AQ' => 'Antarctica ğŸ‡¦ğŸ‡¶',
                            'AR' => 'Argentina ğŸ‡¦ğŸ‡·',
                            'AM' => 'Armenia ğŸ‡¦ğŸ‡²',
                            'AW' => 'Aruba ğŸ‡¦ğŸ‡¼',
                            'AU' => 'Australia ğŸ‡¦ğŸ‡º',
                            'AT' => 'Austria ğŸ‡¦ğŸ‡¹',
                            'AZ' => 'Azerbaijan ğŸ‡¦ğŸ‡¿',
                            'BS' => 'Bahamas ğŸ‡§ğŸ‡¸',
                            'BH' => 'Bahrain ğŸ‡§ğŸ‡­',
                            'BD' => 'Bangladesh ğŸ‡§ğŸ‡©',
                            'BB' => 'Barbados ğŸ‡§ğŸ‡§',
                            'BY' => 'Belarus ğŸ‡§ğŸ‡¾',
                            'BE' => 'Belgium ğŸ‡§ğŸ‡ª',
                            'BZ' => 'Belize ğŸ‡§ğŸ‡¿',
                            'BJ' => 'Benin ğŸ‡§ğŸ‡¯',
                            'BM' => 'Bermuda ğŸ‡§ğŸ‡²',
                            'BT' => 'Bhutan ğŸ‡§ğŸ‡¹',
                            'BO' => 'Bolivia ğŸ‡§ğŸ‡´',
                            'BQ' => 'Bonaire, Sint Eustatius and Saba ğŸ‡§ğŸ‡¶',
                            'BA' => 'Bosnia and Herzegovina ğŸ‡§ğŸ‡¦',
                            'BW' => 'Botswana ğŸ‡§ğŸ‡¼',
                            'BR' => 'Brazil ğŸ‡§ğŸ‡·',
                            'IO' => 'British Indian Ocean Territory ğŸ‡®ğŸ‡´',
                            'VG' => 'British Virgin Islands ğŸ‡»ğŸ‡¬',
                            'BN' => 'Brunei ğŸ‡§ğŸ‡³',
                            'BG' => 'Bulgaria ğŸ‡§ğŸ‡¬',
                            'BF' => 'Burkina Faso ğŸ‡§ğŸ‡«',
                            'BI' => 'Burundi ğŸ‡§ğŸ‡®',
                            'CV' => 'Cabo Verde ğŸ‡¨ğŸ‡»',
                            'KH' => 'Cambodia ğŸ‡°ğŸ‡­',
                            'CM' => 'Cameroon ğŸ‡¨ğŸ‡²',
                            'CA' => 'Canada ğŸ‡¨ğŸ‡¦',
                            'KY' => 'Cayman Islands ğŸ‡°ğŸ‡¾',
                            'CF' => 'Central African Republic ğŸ‡¨ğŸ‡«',
                            'TD' => 'Chad ğŸ‡¹ğŸ‡©',
                            'CL' => 'Chile ğŸ‡¨ğŸ‡±',
                            'CN' => 'China ğŸ‡¨ğŸ‡³',
                            'CX' => 'Christmas Island ğŸ‡¨ğŸ‡½',
                            'CC' => 'Cocos (Keeling) Islands ğŸ‡¨ğŸ‡¨',
                            'CO' => 'Colombia ğŸ‡¨ğŸ‡´',
                            'KM' => 'Comoros ğŸ‡°ğŸ‡²',
                            'CG' => 'Congo ğŸ‡¨ğŸ‡¬',
                            'CD' => 'Congo (DRC) ğŸ‡¨ğŸ‡©',
                            'CK' => 'Cook Islands ğŸ‡¨ğŸ‡°',
                            'CR' => 'Costa Rica ğŸ‡¨ğŸ‡·',
                            'CI' => 'CÃ´te d\'Ivoire ğŸ‡¨ğŸ‡®',
                            'HR' => 'Croatia ğŸ‡­ğŸ‡·',
                            'CU' => 'Cuba ğŸ‡¨ğŸ‡º',
                            'CW' => 'CuraÃ§ao ğŸ‡¨ğŸ‡¼',
                            'CY' => 'Cyprus ğŸ‡¨ğŸ‡¾',
                            'CZ' => 'Czech Republic ğŸ‡¨ğŸ‡¿',
                            'DK' => 'Denmark ğŸ‡©ğŸ‡°',
                            'DJ' => 'Djibouti ğŸ‡©ğŸ‡¯',
                            'DM' => 'Dominica ğŸ‡©ğŸ‡²',
                            'DO' => 'Dominican Republic ğŸ‡©ğŸ‡´',
                            'EC' => 'Ecuador ğŸ‡ªğŸ‡¨',
                            'EG' => 'Egypt ğŸ‡ªğŸ‡¬',
                            'SV' => 'El Salvador ğŸ‡¸ğŸ‡»',
                            'GQ' => 'Equatorial Guinea ğŸ‡¬ğŸ‡¶',
                            'ER' => 'Eritrea ğŸ‡ªğŸ‡·',
                            'EE' => 'Estonia ğŸ‡ªğŸ‡ª',
                            'SZ' => 'Eswatini ğŸ‡¸ğŸ‡¿',
                            'ET' => 'Ethiopia ğŸ‡ªğŸ‡¹',
                            'FK' => 'Falkland Islands ğŸ‡«ğŸ‡°',
                            'FO' => 'Faroe Islands ğŸ‡«ğŸ‡´',
                            'FJ' => 'Fiji ğŸ‡«ğŸ‡¯',
                            'FI' => 'Finland ğŸ‡«ğŸ‡®',
                            'FR' => 'France ğŸ‡«ğŸ‡·',
                            'GF' => 'French Guiana ğŸ‡¬ğŸ‡«',
                            'PF' => 'French Polynesia ğŸ‡µğŸ‡«',
                            'TF' => 'French Southern Territories ğŸ‡¹ğŸ‡«',
                            'GA' => 'Gabon ğŸ‡¬ğŸ‡¦',
                            'GM' => 'Gambia ğŸ‡¬ğŸ‡²',
                            'GE' => 'Georgia ğŸ‡¬ğŸ‡ª',
                            'DE' => 'Germany ğŸ‡©ğŸ‡ª',
                            'GH' => 'Ghana ğŸ‡¬ğŸ‡­',
                            'GI' => 'Gibraltar ğŸ‡¬ğŸ‡®',
                            'GR' => 'Greece ğŸ‡¬ğŸ‡·',
                            'GL' => 'Greenland ğŸ‡¬ğŸ‡±',
                            'GD' => 'Grenada ğŸ‡¬ğŸ‡©',
                            'GP' => 'Guadeloupe ğŸ‡¬ğŸ‡µ',
                            'GU' => 'Guam ğŸ‡¬ğŸ‡º',
                            'GT' => 'Guatemala ğŸ‡¬ğŸ‡¹',
                            'GG' => 'Guernsey ğŸ‡¬ğŸ‡¬',
                            'GN' => 'Guinea ğŸ‡¬ğŸ‡³',
                            'GW' => 'Guinea-Bissau ğŸ‡¬ğŸ‡¼',
                            'GY' => 'Guyana ğŸ‡¬ğŸ‡¾',
                            'HT' => 'Haiti ğŸ‡­ğŸ‡¹',
                            'HN' => 'Honduras ğŸ‡­ğŸ‡³',
                            'HK' => 'Hong Kong ğŸ‡­ğŸ‡°',
                            'HU' => 'Hungary ğŸ‡­ğŸ‡º',
                            'IS' => 'Iceland ğŸ‡®ğŸ‡¸',
                            'IN' => 'India ğŸ‡®ğŸ‡³',
                            'ID' => 'Indonesia ğŸ‡®ğŸ‡©',
                            'IR' => 'Iran ğŸ‡®ğŸ‡·',
                            'IQ' => 'Iraq ğŸ‡®ğŸ‡¶',
                            'IE' => 'Ireland ğŸ‡®ğŸ‡ª',
                            'IM' => 'Isle of Man ğŸ‡®ğŸ‡²',
                            'IL' => 'Israel ğŸ‡®ğŸ‡±',
                            'IT' => 'Italy ğŸ‡®ğŸ‡¹',
                            'JM' => 'Jamaica ğŸ‡¯ğŸ‡²',
                            'JP' => 'Japan ğŸ‡¯ğŸ‡µ',
                            'JE' => 'Jersey ğŸ‡¯ğŸ‡ª',
                            'JO' => 'Jordan ğŸ‡¯ğŸ‡´',
                            'KZ' => 'Kazakhstan ğŸ‡°ğŸ‡¿',
                            'KE' => 'Kenya ğŸ‡°ğŸ‡ª',
                            'KI' => 'Kiribati ğŸ‡°ğŸ‡®',
                            'KW' => 'Kuwait ğŸ‡°ğŸ‡¼',
                            'KG' => 'Kyrgyzstan ğŸ‡°ğŸ‡¬',
                            'LA' => 'Laos ğŸ‡±ğŸ‡¦',
                            'LV' => 'Latvia ğŸ‡±ğŸ‡»',
                            'LB' => 'Lebanon ğŸ‡±ğŸ‡§',
                            'LS' => 'Lesotho ğŸ‡±ğŸ‡¸',
                            'LR' => 'Liberia ğŸ‡±ğŸ‡·',
                            'LY' => 'Libya ğŸ‡±ğŸ‡¾',
                            'LI' => 'Liechtenstein ğŸ‡±ğŸ‡®',
                            'LT' => 'Lithuania ğŸ‡±ğŸ‡¹',
                            'LU' => 'Luxembourg ğŸ‡±ğŸ‡º',
                            'MO' => 'Macau ğŸ‡²ğŸ‡´',
                            'MG' => 'Madagascar ğŸ‡²ğŸ‡¬',
                            'MW' => 'Malawi ğŸ‡²ğŸ‡¼',
                            'MY' => 'Malaysia ğŸ‡²ğŸ‡¾',
                            'MV' => 'Maldives ğŸ‡²ğŸ‡»',
                            'ML' => 'Mali ğŸ‡²ğŸ‡±',
                            'MT' => 'Malta ğŸ‡²ğŸ‡¹',
                            'MH' => 'Marshall Islands ğŸ‡²ğŸ‡­',
                            'MQ' => 'Martinique ğŸ‡²ğŸ‡¶',
                            'MR' => 'Mauritania ğŸ‡²ğŸ‡·',
                            'MU' => 'Mauritius ğŸ‡²ğŸ‡º',
                            'MX' => 'Mexico ğŸ‡²ğŸ‡½',
                            'FM' => 'Micronesia ğŸ‡«ğŸ‡²',
                            'MD' => 'Moldova ğŸ‡²ğŸ‡©',
                            'MC' => 'Monaco ğŸ‡²ğŸ‡¨',
                            'MN' => 'Mongolia ğŸ‡²ğŸ‡³',
                            'ME' => 'Montenegro ğŸ‡²ğŸ‡ª',
                            'MS' => 'Montserrat ğŸ‡²ğŸ‡¸',
                            'MA' => 'Morocco ğŸ‡²ğŸ‡¦',
                            'MZ' => 'Mozambique ğŸ‡²ğŸ‡¿',
                            'MM' => 'Myanmar (Burma) ğŸ‡²ğŸ‡²',
                            'NA' => 'Namibia ğŸ‡³ğŸ‡¦',
                            'NR' => 'Nauru ğŸ‡³ğŸ‡·',
                            'NP' => 'Nepal ğŸ‡³ğŸ‡µ',
                            'NL' => 'Netherlands ğŸ‡³ğŸ‡±',
                            'NC' => 'New Caledonia ğŸ‡³ğŸ‡¨',
                            'NZ' => 'New Zealand ğŸ‡³ğŸ‡¿',
                            'NI' => 'Nicaragua ğŸ‡³ğŸ‡®',
                            'NE' => 'Niger ğŸ‡³ğŸ‡ª',
                            'NG' => 'Nigeria ğŸ‡³ğŸ‡¬',
                            'NU' => 'Niue ğŸ‡³ğŸ‡º',
                            'NF' => 'Norfolk Island ğŸ‡³ğŸ‡«',
                            'KP' => 'North Korea ğŸ‡°ğŸ‡µ',
                            'MK' => 'North Macedonia ğŸ‡²ğŸ‡°',
                            'MP' => 'Northern Mariana Islands ğŸ‡²ğŸ‡µ',
                            'NO' => 'Norway ğŸ‡³ğŸ‡´',
                            'OM' => 'Oman ğŸ‡´ğŸ‡²',
                            'PK' => 'Pakistan ğŸ‡µğŸ‡°',
                            'PW' => 'Palau ğŸ‡µğŸ‡¼',
                            'PS' => 'Palestine ğŸ‡µğŸ‡¸',
                            'PA' => 'Panama ğŸ‡µğŸ‡¦',
                            'PG' => 'Papua New Guinea ğŸ‡µğŸ‡¬',
                            'PY' => 'Paraguay ğŸ‡µğŸ‡¾',
                            'PE' => 'Peru ğŸ‡µğŸ‡ª',
                            'PH' => 'Philippines ğŸ‡µğŸ‡­',
                            'PN' => 'Pitcairn Islands ğŸ‡µğŸ‡³',
                            'PL' => 'Poland ğŸ‡µğŸ‡±',
                            'PT' => 'Portugal ğŸ‡µğŸ‡¹',
                            'PR' => 'Puerto Rico ğŸ‡µğŸ‡·',
                            'QA' => 'Qatar ğŸ‡¶ğŸ‡¦',
                            'RE' => 'RÃ©union ğŸ‡·ğŸ‡ª',
                            'RO' => 'Romania ğŸ‡·ğŸ‡´',
                            'RU' => 'Russia ğŸ‡·ğŸ‡º',
                            'RW' => 'Rwanda ğŸ‡·ğŸ‡¼',
                            'WS' => 'Samoa ğŸ‡¼ğŸ‡¸',
                            'SM' => 'San Marino ğŸ‡¸ğŸ‡²',
                            'ST' => 'Sao Tome and Principe ğŸ‡¸ğŸ‡¹',
                            'SA' => 'Saudi Arabia ğŸ‡¸ğŸ‡¦',
                            'SN' => 'Senegal ğŸ‡¸ğŸ‡³',
                            'RS' => 'Serbia ğŸ‡·ğŸ‡¸',
                            'SC' => 'Seychelles ğŸ‡¸ğŸ‡¨',
                            'SL' => 'Sierra Leone ğŸ‡¸ğŸ‡±',
                            'SG' => 'Singapore ğŸ‡¸ğŸ‡¬',
                            'SX' => 'Sint Maarten ğŸ‡¸ğŸ‡½',
                            'SK' => 'Slovakia ğŸ‡¸ğŸ‡°',
                            'SI' => 'Slovenia ğŸ‡¸ğŸ‡®',
                            'SB' => 'Solomon Islands ğŸ‡¸ğŸ‡§',
                            'SO' => 'Somalia ğŸ‡¸ğŸ‡´',
                            'ZA' => 'South Africa ğŸ‡¿ğŸ‡¦',
                            'GS' => 'South Georgia and South Sandwich Islands ğŸ‡¬ğŸ‡¸',
                            'KR' => 'South Korea ğŸ‡°ğŸ‡·',
                            'SS' => 'South Sudan ğŸ‡¸ğŸ‡¸',
                            'ES' => 'Spain ğŸ‡ªğŸ‡¸',
                            'LK' => 'Sri Lanka ğŸ‡±ğŸ‡°',
                            'SD' => 'Sudan ğŸ‡¸ğŸ‡©',
                            'SR' => 'Suriname ğŸ‡¸ğŸ‡·',
                            'SJ' => 'Svalbard and Jan Mayen ğŸ‡¸ğŸ‡¯',
                            'SE' => 'Sweden ğŸ‡¸ğŸ‡ª',
                            'CH' => 'Switzerland ğŸ‡¨ğŸ‡­',
                            'SY' => 'Syria ğŸ‡¸ğŸ‡¾',
                            'TW' => 'Taiwan ğŸ‡¹ğŸ‡¼',
                            'TJ' => 'Tajikistan ğŸ‡¹ğŸ‡¯',
                            'TZ' => 'Tanzania ğŸ‡¹ğŸ‡¿',
                            'TH' => 'Thailand ğŸ‡¹ğŸ‡­',
                            'TL' => 'Timor-Leste ğŸ‡¹ğŸ‡±',
                            'TG' => 'Togo ğŸ‡¹ğŸ‡¬',
                            'TK' => 'Tokelau ğŸ‡¹ğŸ‡°',
                            'TO' => 'Tonga ğŸ‡¹ğŸ‡´',
                            'TT' => 'Trinidad and Tobago ğŸ‡¹ğŸ‡¹',
                            'TN' => 'Tunisia ğŸ‡¹ğŸ‡³',
                            'TR' => 'Turkey ğŸ‡¹ğŸ‡·',
                            'TM' => 'Turkmenistan ğŸ‡¹ğŸ‡²',
                            'TC' => 'Turks and Caicos Islands ğŸ‡¹ğŸ‡¨',
                            'TV' => 'Tuvalu ğŸ‡¹ğŸ‡»',
                            'UG' => 'Uganda ğŸ‡ºğŸ‡¬',
                            'UA' => 'Ukraine ğŸ‡ºğŸ‡¦',
                            'AE' => 'United Arab Emirates ğŸ‡¦ğŸ‡ª',
                            'GB' => 'United Kingdom ğŸ‡¬ğŸ‡§',
                            'US' => 'United States ğŸ‡ºğŸ‡¸',
                            'UY' => 'Uruguay ğŸ‡ºğŸ‡¾',
                            'UZ' => 'Uzbekistan ğŸ‡ºğŸ‡¿',
                            'VU' => 'Vanuatu ğŸ‡»ğŸ‡º',
                            'VA' => 'Vatican City ğŸ‡»ğŸ‡¦',
                            'VE' => 'Venezuela ğŸ‡»ğŸ‡ª',
                            'VN' => 'Vietnam ğŸ‡»ğŸ‡³',
                            'VI' => 'U.S. Virgin Islands ğŸ‡»ğŸ‡®',
                            'WF' => 'Wallis and Futuna ğŸ‡¼ğŸ‡«',
                            'EH' => 'Western Sahara ğŸ‡ªğŸ‡­',
                            'YE' => 'Yemen ğŸ‡¾ğŸ‡ª',
                            'ZM' => 'Zambia ğŸ‡¿ğŸ‡²',
                            'ZW' => 'Zimbabwe ğŸ‡¿ğŸ‡¼',
                        ])
                            ->searchable()
                            ->native(false),

                        DatePicker::make('aÃ±o')
                            ->label('AÃ±o de PublicaciÃ³n')
                            ->required()
                            ->format('Y')
                            ->native(false)
                            ->maxDate(now()),

                        TextInput::make('url')
                            ->label('URL (opcional)')
                            ->url()
                            ->columnSpanFull() // Make url field take the full width
                            ->maxLength(255)
                            ->nullable(),
                    ])
                    ->columns(2),
            ]);
    }

    public static function table(Table $table): Table
    {
        return $table
            ->columns([
                Tables\Columns\TextColumn::make('fuente')
                    ->searchable(),
                Tables\Columns\TextColumn::make('pais')
                    ->searchable(),
                Tables\Columns\TextColumn::make('aÃ±o'),
                Tables\Columns\TextColumn::make('url')
                    ->searchable(),
                Tables\Columns\TextColumn::make('created_at')
                    ->dateTime()
                    ->sortable()
                    ->toggleable(isToggledHiddenByDefault: true),
                Tables\Columns\TextColumn::make('updated_at')
                    ->dateTime()
                    ->sortable()
                    ->toggleable(isToggledHiddenByDefault: true),
            ])
            ->filters([
                //
            ])
            ->actions([
                Tables\Actions\EditAction::make(),
            ])
            ->bulkActions([
                Tables\Actions\BulkActionGroup::make([
                    Tables\Actions\DeleteBulkAction::make(),
                ]),
            ]);
    }

    public static function getRelations(): array
    {
        return [
            //
        ];
    }

    public static function getPages(): array
    {
        return [
            'index' => Pages\ListFuentes::route('/'),
            'create' => Pages\CreateFuente::route('/create'),
            'edit' => Pages\EditFuente::route('/{record}/edit'),
        ];
    }
}
